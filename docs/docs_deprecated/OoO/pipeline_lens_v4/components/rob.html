<!-- components/rob.html -->
<div class="card">
  <h3>Reorder Buffer (ROB)</h3>
  <table id="robTable">
    <thead>
      <tr>
        <th>#</th>
        <th>Instr</th>
        <th>Dst PR</th>
        <th>Old PR</th>
        <th>WB?</th>
        <th>Commit?</th>
      </tr>
    </thead>
    <tbody id="robBody">
      <tr><td colspan="6" style="text-align:center;color:gray;">No entries yet</td></tr>
    </tbody>
  </table>
</div>

<script>
/* renderROB(): ana sayfadan çağrılır */
function renderROB(state) {
  const robBody = document.getElementById("robBody");
  if (!state || !state.ROB || state.ROB.length === 0) {
    robBody.innerHTML = '<tr><td colspan="6" style="text-align:center;color:gray;">Empty</td></tr>';
    return;
  }

  robBody.innerHTML = "";
  state.ROB.forEach((r, i) => {
    const tr = document.createElement("tr");
    if (i === state.commitPtr) tr.classList.add("highlight");
    tr.innerHTML = `
      <td>${r.idx}</td>
      <td class="mono">${r.op}</td>
      <td class="mono">${r.dst}</td>
      <td class="mono">${r.old}</td>
      <td>${r.wb ? "✓" : "—"}</td>
      <td>${r.commit ? "✓" : "—"}</td>
    `;
    robBody.appendChild(tr);
  });
}
</script>
