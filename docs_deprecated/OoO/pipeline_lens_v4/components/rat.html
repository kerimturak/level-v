<!-- components/rat.html -->
<div class="card">
  <h3>RAT Maps — Frontend & Architectural</h3>
  <div class="grid2">
    <div>
      <div class="small">Frontend Map (speculative)</div>
      <div id="frontendMap" class="kv mono" style="margin-top:6px;">
        <div style="color:gray;">Empty</div>
      </div>
    </div>
    <div>
      <div class="small">Architectural Map (committed)</div>
      <div id="archMap" class="kv mono" style="margin-top:6px;">
        <div style="color:gray;">Empty</div>
      </div>
    </div>
  </div>
</div>

<script>
/* renderRAT(): ana sayfadan çağrılır */
function renderRAT(state) {
  const draw = (id, map) => {
    const host = document.getElementById(id);
    if (!map) {
      host.innerHTML = '<div style="color:gray;">Empty</div>';
      return;
    }
    host.innerHTML = "";
    const regs = Array.from({ length: 16 }, (_, i) => "R" + (i + 1));
    regs.forEach(r => {
      const d = document.createElement("div");
      const mapped = map[r] || "—";
      d.textContent = `${r} → ${mapped}`;
      host.appendChild(d);
    });
  };

  draw("frontendMap", state.fmap);
  draw("archMap", state.amap);
}
</script>
