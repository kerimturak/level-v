<!-- components/rs.html -->
<div class="card">
  <h3>Reservation Stations (RS) — only tags</h3>
  <table id="rsTable">
    <thead>
      <tr>
        <th>#</th>
        <th>Instr</th>
        <th>S1 Tag (ready)</th>
        <th>S2 Tag (ready)</th>
        <th>Dst Tag</th>
        <th>FU</th>
        <th>State</th>
      </tr>
    </thead>
    <tbody id="rsBody">
      <tr><td colspan="7" style="text-align:center;color:gray;">No entries yet</td></tr>
    </tbody>
  </table>
</div>

<script>
/* renderRS(): ana sayfadan çağrılır */
function renderRS(state) {
  const rsBody = document.getElementById("rsBody");
  if (!state || !state.RS || state.RS.length === 0) {
    rsBody.innerHTML = '<tr><td colspan="7" style="text-align:center;color:gray;">Empty</td></tr>';
    return;
  }
  rsBody.innerHTML = "";
  state.RS.forEach(e => {
    const tr = document.createElement("tr");
    const s1 = `${e.s1} (${state.prfReady[e.s1] ? "✓" : "…"})`;
    const s2 = `${e.s2} (${state.prfReady[e.s2] ? "✓" : "…"})`;
    const badge = e.done
      ? "<span class='badge b-wb'>WB</span>"
      : e.issued
      ? "<span class='badge b-exec'>Exec</span>"
      : "<span class='badge b-stall'>Wait</span>";
    tr.innerHTML = `
      <td>${e.idx}</td>
      <td class="mono">${e.op}</td>
      <td class="mono">${s1}</td>
      <td class="mono">${s2}</td>
      <td class="mono">${e.d}</td>
      <td>${e.fu}</td>
      <td>${badge}</td>
    `;
    rsBody.appendChild(tr);
  });
}
</script>
